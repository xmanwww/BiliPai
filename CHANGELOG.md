# Changelog

## [5.3.3] - 2026-02-14

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Bangumi æ—¶é—´çº¿ç¨³å®šæ€§ä¿®å¤**:
  - åœ¨ `BangumiTimelineScreen` ä¸­å°†åˆ—è¡¨ key è°ƒæ•´ä¸º `seasonId + episodeId` å¤åˆ keyï¼Œé¿å… `episodeId` é‡å¤æ—¶å¯¼è‡´çš„åˆ—è¡¨å´©æºƒé—®é¢˜ã€‚
- **æ–‡æ¡ˆä¸€è‡´æ€§ä¿®æ­£ï¼ˆWatch Laterï¼‰**:
  - å…¨å±€ä¿®æ­£â€œç¨€åå†çœ‹â€ä¸ºâ€œç¨åå†çœ‹â€ï¼Œç»Ÿä¸€äº†ä¾§è¾¹æ ã€åº•éƒ¨å¯¼èˆªä¸ç›¸å…³æ³¨é‡Šæ–‡æ¡ˆã€‚
- **ç«–å±æ’­æ”¾å™¨äº¤äº’å®Œå–„**:
  - é¡¶æ å»é™¤é‡å¤çš„ä¸‰ç‚¹èœå•å…¥å£ï¼Œé¿å…ä¸åº•éƒ¨â€œç®€ä»‹â€åŠŸèƒ½é‡å ã€‚
  - æ¨ªç«–å±åˆ‡æ¢å…¥å£ä¸‹ç§»è‡³å³ä¸‹è§’æ“ä½œåŒºï¼Œå•æ‰‹è§¦è¾¾æ›´é¡ºæ‰‹ã€‚
  - ç«–å±æ”¯æŒé•¿æŒ‰å€é€Ÿæ’­æ”¾ï¼ˆæ¾æ‰‹æ¢å¤åŸé€Ÿï¼‰ï¼Œå¹¶å¢åŠ å®æ—¶å€é€Ÿåé¦ˆã€‚
  - ç«–å±åˆ†äº«æ–‡æ¡ˆè¡¥é½è§†é¢‘æ ‡é¢˜ï¼ˆæ ¼å¼ï¼š`ã€æ ‡é¢˜ã€‘+ é“¾æ¥`ï¼‰ã€‚
- **é¦–é¡µé¡¶æ è§†è§‰æ¯”ä¾‹å¾®è°ƒ**:
  - é¡¶æ é€‰ä¸­èƒŒæ™¯ï¼ˆèƒ¶å›Šï¼‰æ•´ä½“ç¼©å°ï¼Œç¼“è§£â€œè‰²å—åå¤§â€è§‚æ„Ÿã€‚
  - é¡¶æ æ–‡å­—å­—å·å°å¹…ä¸Šè°ƒï¼ˆä»ä½äºæ—§ç‰ˆä½“é‡ï¼‰ï¼Œæå‡å¯è¯»æ€§ä¸å¯¹æ¯”å¹³è¡¡ã€‚
  - å…³é”®å°ºå¯¸æ”¹ä¸ºé›†ä¸­ token ç­–ç•¥ï¼Œåç»­å¯å¿«é€Ÿå›æ»š/AB è°ƒæ•´ã€‚
- **é¦–é¡µé¡¶æ è‡ªå®šä¹‰ï¼ˆæ˜¾ç¤º/éšè—/æ’åºï¼‰**:
  - æ–°å¢é¡¶éƒ¨æ ‡ç­¾é¡ºåºä¸å¯è§é¡¹æŒä¹…åŒ–é…ç½®ï¼ˆDataStoreï¼‰ã€‚
  - è®¾ç½®é¡µæ”¯æŒé¡¶éƒ¨æ ‡ç­¾æ˜¾éšä¸æ’åºï¼ˆ`æ¨è`å›ºå®šæ˜¾ç¤ºï¼‰ï¼Œå¹¶æ”¯æŒä¸€é”®é‡ç½®ã€‚
  - é¦–é¡µé¡¶éƒ¨æ ‡ç­¾æ˜ å°„æ”¹ä¸ºæŒ‰â€œå½“å‰é…ç½®åˆ—è¡¨â€é©±åŠ¨ï¼Œç§»é™¤å¯¹å›ºå®šç´¢å¼•çš„ä¾èµ–ã€‚
  - ç›´æ’­å…¥å£è·¯ç”±æ”¹ä¸ºæŒ‰æ ‡ç­¾è¯­ä¹‰åˆ¤æ–­ï¼Œé¿å…è‡ªå®šä¹‰æ’åºåç‚¹å‡»é”™ä½ã€‚
  - ä¿®å¤é¡¶æ é…ç½®çƒ­æ›´æ–°æ—¶ `HorizontalPager` å¯èƒ½å‘ç”Ÿçš„è¶Šç•Œå´©æºƒï¼ˆç´¢å¼•ä¿æŠ¤ + é¡µç é’³åˆ¶ï¼‰ã€‚
- **ä»Šæ—¥æ¨èå•å¯ç”¨æ€§ä¼˜åŒ–**:
  - ç‚¹å‡»æ¨èå•è§†é¢‘åä¼šç«‹å³ä»å½“å‰é˜Ÿåˆ—ç§»é™¤ï¼Œé™ä½â€œçœ‹å®Œå³åºŸâ€çš„ä½“æ„Ÿã€‚
  - å·²ç‚¹å‡»æ¡ç›®åœ¨åç»­é‡å»ºæ¨èæ—¶ä¼šè¢«è¿‡æ»¤ï¼Œé¿å…çŸ­æ—¶é—´é‡å¤å›æµã€‚
  - å¡ç‰‡å†…è¡¥å……äº†ç®€çŸ­ä½¿ç”¨è¯´æ˜ï¼ˆç‚¹å‡»å³ç§»é™¤ã€ä¸‹æ‹‰å¯æ¢ä¸€æ‰¹ï¼‰ã€‚
- **ç«–å±äº¤äº’ç»§ç»­å¯¹é½ï¼ˆP2ï¼‰**:
  - ä¿®å¤åˆ‡æ¢ç«–å±åâ€œä¼˜å…ˆæ˜¾ç¤ºå°é¢ã€æœªç›´æ¥èµ·æ’­â€çš„é—®é¢˜ï¼Œæ”¹ä¸ºæ’­æ”¾å™¨å°±ç»ªåç›´å‡ºæ’­æ”¾ç”»é¢ã€‚
  - è¿›ä¸€æ­¥ä¿®æ­£ä¸ºâ€œé¦–å¸§æ¸²æŸ“åæ‰éšè—å°é¢â€ï¼Œé¿å…ç«–å±åˆ‡æ¢ç¬é—´å‡ºç°é»‘å±+æ’­æ”¾é”®ã€‚
  - ç«–å±ç¬¬ä¸€é¡µè¿›åº¦æ¡æ”¯æŒä½¿ç”¨è¿›å…¥æ—¶è¿›åº¦åšåˆå§‹ç§å­ï¼Œå¹¶åœ¨æš‚åœ/ç­‰å¾…é¦–å¸§é˜¶æ®µä¿æŒè¿›åº¦æ˜¾ç¤ºã€‚
  - ç«–å±å…¥å£æ”¹ä¸ºâ€œè¿›å…¥ç¬é—´è¿›åº¦å¿«ç…§â€é©±åŠ¨ï¼Œé¿å…é‡ç»„æ—¶è¯»å–å®æ—¶ä½ç½®å¯¼è‡´è¿›åº¦æ¡å›é€€ã€‚
  - æš‚åœå›¾æ ‡æ˜¾ç¤ºæ¡ä»¶æ”¹ä¸ºâ€œçœŸå®æš‚åœæ€â€åˆ¤å®šï¼Œç¼“å†²/å¾…æ’­æœŸé—´ä¸å†è¯¯æ˜¾ç¤ºå¤§æ’­æ”¾é”®ã€‚
  - ä¿®å¤å…±äº«æ’­æ”¾å™¨æ¨¡å¼ä¸‹çš„è¿›åº¦å›å†™å†²çªï¼šç«–å±æ’­æ”¾æœŸé—´ä¸å†å¯¹åŒä¸€ ExoPlayer æ‰§è¡Œå‘¨æœŸæ€§å›å†™ seekï¼Œé¿å…â€œé¦–å¸§é‡å¤/ç”»é¢æŠ½åŠ¨â€ã€‚
  - ä¿®å¤æ¨ªå±ç‚¹å‡»â€œç«–å±â€è·¯ç”±é”™è¯¯ï¼šä¸å†å›è½åˆ°æ™®é€šè¯¦æƒ…é¡µï¼Œæ”¹ä¸ºç›´æ¥è¿›å…¥ç«–å±æ²‰æµ¸æ’­æ”¾æµï¼ˆå¿…è¦æ—¶å…ˆé€€å‡ºæ¨ªå±å…¨å±ï¼‰ã€‚
  - ç«–å±å³ä¸‹è§’æ—‹è½¬å…¥å£å›¾æ ‡ç”±â€œçª—å£æ ·å¼â€æ›¿æ¢ä¸ºâ€œå±å¹•æ—‹è½¬â€å›¾æ ‡ï¼Œè¯­ä¹‰æ›´è´´è¿‘â€œåˆ‡æ¢æ¨ªå±â€ã€‚
  - å¯åŠ¨â€œå• ExoPlayer å¤ç”¨â€é‡æ„ç¬¬ä¸€é˜¶æ®µï¼šç«–å±é¡µå¤ç”¨ä¸»æ’­æ”¾å™¨å®ä¾‹ï¼Œä»…åˆ‡æ¢æ‰¿è½½å®¹å™¨ï¼Œå‡å°‘è¿›ç«–å±é‡æ‹‰æµä¸çŠ¶æ€ä¸¢å¤±ã€‚
  - ç«–å±åº•éƒ¨å³ä¸‹è§’å»é‡ï¼Œä¿ç•™å•ä¸€æ¨ªç«–å±åˆ‡æ¢å…¥å£ï¼Œé¿å…åŒæŒ‰é’®è¯­ä¹‰é‡å ã€‚
  - æ ‡é¢˜æ”¯æŒç›´æ¥ç‚¹å‡»æ‰“å¼€â€œç®€ä»‹ + æ¨èâ€é¢æ¿ï¼Œæ¨èé¡¹å¯ç›´æ¥è·³è½¬åˆ°ç«–å±æµå†…å¯¹åº”è§†é¢‘ã€‚
  - ç«–å± UP ä¿¡æ¯åŒºæ”¯æŒç‚¹å‡»è¿›å…¥ UP ä¸»é¡µã€‚
- **é¦–é¡µ/ç¨åå†çœ‹åˆ é™¤åŠ¨æ•ˆåŠ é€Ÿï¼ˆå‚è€ƒ Telegram é£æ ¼ï¼‰**:
  - ä¸æ„Ÿå…´è¶£ä¸ç¨åå†çœ‹åˆ é™¤ç»Ÿä¸€åˆ‡æ¢ä¸ºâ€œå¿«ç‰ˆâ€æ¶ˆæ•£é¢„è®¾ï¼Œå‡å°‘æ‹–æ²“æ„Ÿã€‚
  - ç¼©çŸ­ç²’å­åŠ¨ç”»æ€»æ—¶é•¿ä¸æ³¢å‰æ‰©æ•£æ—¶é—´ï¼Œåˆ é™¤åé¦ˆæ›´å¹²è„†ã€‚
  - ç¨åå†çœ‹é¡µé¢æ–°å¢â€œæ‰¹é‡åˆ é™¤â€æ¨¡å¼ï¼ˆé€‰æ‹©/å…¨é€‰/ç¡®è®¤åˆ é™¤ï¼‰ã€‚
- **æ’­æ”¾åŠ è½½é“¾è·¯æ€§èƒ½ä¼˜åŒ–ï¼ˆé’ˆå¯¹â€œåŠ è½½æ…¢ã€å¡é¡¿â€åé¦ˆï¼‰**:
  - è‡ªåŠ¨æœ€é«˜ç”»è´¨ç­–ç•¥åˆ†çº§ï¼šéå¤§ä¼šå‘˜ä¼˜å…ˆç¨³å®šèµ·æ’­æ¡£ï¼Œé™ä½é«˜ç”»è´¨åå•†å¤±è´¥æ¦‚ç‡ã€‚
  - æ–°å¢ APP API é£æ§å†·å´ï¼ˆå‘½ä¸­ `-351` åçŸ­æœŸè·³è¿‡ APP APIï¼‰ï¼Œé¿å…æ— æ•ˆé‡è¯•ã€‚
  - DASH é«˜ç”»è´¨å¤±è´¥åå¿«é€Ÿå›è½åˆ° 80ï¼Œå‡å°‘é‡è¯•ç­‰å¾…ã€‚
  - é¦–å¸§ä¼˜å…ˆç­–ç•¥ï¼šéå…³é”®è¯·æ±‚å»¶åè§¦å‘ï¼Œå¹¶é™åˆ¶æ¨èé¢„åŠ è½½ä»…åœ¨ Wi-Fi ä¸‹æ‰§è¡Œã€‚
- **å‘å¸ƒæ¸ é“å®‰å…¨æç¤ºå¢å¼º**:
  - è®¾ç½®é¡µâ€œå…³äºä¸æ”¯æŒâ€æ–°å¢å¸¸é©»å‘å¸ƒæ¸ é“å£°æ˜å¡ç‰‡ï¼ˆå›ºå®šå±•ç¤ºå®˜æ–¹æ¸ é“ï¼‰ã€‚
  - è®¾ç½®é¡µæ–°å¢â€œå‘å¸ƒæ¸ é“å£°æ˜â€å…¥å£å¼¹çª—ï¼Œç»Ÿä¸€å±•ç¤ºå…è´£å£°æ˜æ–‡æ¡ˆã€‚
  - æ–°ç”¨æˆ·é¦–æ¬¡æ‰“å¼€åº”ç”¨æ—¶å¼¹å‡ºå‘å¸ƒæ¸ é“å£°æ˜ï¼ˆä»…é¦–æ¬¡ç¡®è®¤ï¼‰ã€‚
- **UP ä¸»é¡µè¿ç»­æ’­æ”¾é“¾è·¯è¡¥å¼º**:
  - ç©ºé—´é¡µâ€œæ’­æ”¾å…¨éƒ¨â€å’Œè§†é¢‘åˆ—è¡¨ç‚¹å‡»æ”¹ä¸ºæ„å»ºå¤–éƒ¨æ’­æ”¾åˆ—è¡¨ï¼ˆ`setExternalPlaylist`ï¼‰ï¼Œä»æ‰€ç‚¹è§†é¢‘å¼€å§‹é¡ºåºä¸²è”æ’­æ”¾ã€‚
- **æµ‹è¯•è¡¥å……**:
  - æ‰©å±• `HomeTopCategoryPolicyTest`ï¼Œè¦†ç›–è‡ªå®šä¹‰é¡ºåº/å¯è§æ€§ä¸å…œåº•é€»è¾‘ã€‚
  - æ‰©å±• `TopTabLayoutPolicyTest`ï¼Œè¦†ç›–ç›´æ’­è·¯ç”±è¯­ä¹‰åˆ¤æ–­é€»è¾‘ã€‚
  - æ–°å¢ `TodayWatchQueuePolicyTest`ï¼Œè¦†ç›–ç‚¹å‡»æ¶ˆè´¹åçš„ç§»é™¤ä¸è¡¥è´§åˆ¤å®šé€»è¾‘ã€‚
  - æ‰©å±• `TodayWatchPolicyTest`ï¼Œè¦†ç›–å·²æ¶ˆè´¹æ¡ç›®è¿‡æ»¤é€»è¾‘ã€‚
  - æ–°å¢ `PortraitSharePolicyTest`ï¼Œè¦†ç›–ç«–å±åˆ†äº«æ–‡æ¡ˆæ‹¼è£…è§„åˆ™ã€‚
  - æ‰©å±• `PortraitFullscreenOverlayPolicyTest`ï¼Œè¦†ç›–é¡¶æ é‡å¤èœå•éšè—ç­–ç•¥ã€‚
  - æ‰©å±• `PortraitPagerSwitchPolicyTest`ï¼Œè¦†ç›–ç«–å±å°é¢æ˜¾ç¤ºç­–ç•¥ã€‚
  - æ–°å¢ `SpacePlaybackPolicyTest`ï¼Œè¦†ç›– UP ç©ºé—´å¤–éƒ¨æ’­æ”¾åˆ—è¡¨æ„å»ºä¸èµ·æ’­ç´¢å¼•é€»è¾‘ã€‚

### ğŸ“¦ Release

- **Version Bump**: Updated app version to `5.3.3` (`versionCode` `69`).

## [5.3.2] - 2026-02-13

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Top/Bottom Label Alignment Rework**:
  - reduced top-tab selected-state scaling in `å›¾æ ‡+æ–‡å­—` mode to remove visual drop/misalignment
  - normalized top-tab icon/text metrics (icon size, line-height, spacing) for consistent optical center
  - adjusted bottom-bar icon+text metrics and baseline to improve icon/title alignment consistency
- **Version Bump**: Updated app version to `5.3.2` (`versionCode` `68`).

## [5.3.1] - 2026-02-13

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Bangumi Policy Layer**: Added dedicated policy modules to split view logic from screens/viewmodels:
  - `BangumiFollowStatusPolicy`
  - `BangumiModePolicy`
  - `BangumiPlaybackUrlPolicy`
  - `BangumiSeasonActionPolicy`
  - `BangumiUiPolicy`
  - `MyFollowPolicy`
  - `MyFollowStats`
  - `MyFollowStatsDetailPolicy`
  - `MyFollowWatchInsightPolicy`
- **Home Top Category Policy**: Added `HomeTopCategoryPolicy` to centralize top-tab category order/mapping.
- **Mine Drawer Visual Policy**: Added `MineSideDrawerVisualPolicy` for blur/opacity/scrim tuning in one place.
- **Danmaku Settings Policy**: Added `DanmakuSettingsPolicy` for opacity normalization and boundary handling.
- **Watch Later External Playlist Policy**: Added `WatchLaterPlaybackPolicy` to build external queue and start index from clicked item.
- **Top Tab Label Mode Setting**: Added configurable top-tab label mode (`å›¾æ ‡+æ–‡å­— / ä»…å›¾æ ‡ / ä»…æ–‡å­—`) in settings and wired to home header.
- **Playlist Persistence**: Added `PlaylistManager` state persistence/restore (playlist, index, play mode, external-queue flag) and app-start initialization.

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Top Tab Refraction Behavior**: Top indicator now disables refraction when fully stationary; refraction only applies during drag/settle motion.
- **Top Tab Text Clarity**: Removed double-text crossfade rendering that caused ghosting/blur on selected tabs; switched to single-layer color interpolation.
- **Top Tab Icon+Text Layout Polish**: Improved visual placement by changing icon+text style to a cleaner horizontal arrangement.
- **Watch Later Playback Order**:
  - card click now also sets external playlist (not only top-right "play all")
  - queue starts from the clicked item index
  - playback flow no longer falls back to recommended queue unexpectedly in this scenario
- **Search Repository Reliability**: Improved video search fallback path (`all/v2`) and page-info handling/logging.
- **Danmaku Repository Robustness**:
  - refined segment-count fallback policy
  - strengthened thumb-up state resolution and error message mapping
  - improved segment cache safety behavior
- **Eye Protection Logic Cleanup**: Consolidated eye-care decision/tuning/reminder logic into policy helpers for predictable behavior.
- **Bangumi Experience Refinement**:
  - clearer follow-state preload flow
  - safer season-id resolution for action routes
  - cleaner playback-url collection and UI sizing rules
  - improved MyFollow type/stat/watch-insight derivation

### âœ… Tests (æµ‹è¯•)

- Added and/or updated unit tests:
  - `BangumiFilterAndSearchTypePolicyTest`
  - `BangumiFollowStatusPolicyTest`
  - `BangumiModePolicyTest`
  - `BangumiPlaybackUrlPolicyTest`
  - `BangumiSeasonActionPolicyTest`
  - `BangumiUiPolicyTest`
  - `MyFollowPolicyTest`
  - `MyFollowStatsPolicyTest`
  - `MyFollowStatsDetailPolicyTest`
  - `MyFollowWatchInsightPolicyTest`
  - `HomeTopCategoryPolicyTest`
  - `MineSideDrawerVisualPolicyTest`
  - `TopTabLayoutPolicyTest`
  - `TopTabLabelModePolicyTest`
  - `TopTabRefractionPolicyTest`
  - `DanmakuRepositoryPolicyTest`
  - `DanmakuSettingsPolicyTest`
  - `EyeProtectionPolicyTest`
  - `LiquidLensProfileTest`
  - `VideoPlaybackUseCaseQualitySwitchTest`
  - `WatchLaterPlaybackPolicyTest`

### ğŸ“¦ Release

- **Version Bump**: Updated app version to `5.3.1` (`versionCode` `67`).

## [5.3.0] - 2026-02-12

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Today Watch Plugin (ä»Šæ—¥æ¨èå•æ’ä»¶)**: Added a new built-in plugin that locally analyzes watch history and builds a daily recommendation queue with two modes:
  - `ä»Šæ™šè½»æ¾çœ‹`
  - `æ·±åº¦å­¦ä¹ çœ‹`
- **Today Watch Card UI**: Added a dedicated recommendation card in Home/Recommend with:
  - mode switch chips
  - UP ä¸»æ¦œ
  - recommended video queue (with UP avatar/name)
  - per-item explanation tags
- **Local Personalization Stores**:
  - added creator-profile persistence store (`TodayWatchProfileStore`)
  - added negative-feedback persistence store (`TodayWatchFeedbackStore`)
- **Eye Protection 2.0**: Rebuilt eye-care plugin with:
  - three presets (`è½»æŸ” / å¹³è¡¡ / ä¸“æ³¨`) plus DIY tuning
  - real-time settings preview
  - reminder cadence + snooze options
  - richer humanized reminder copy

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Cold Start Discoverability**: Fixed issue where Today Watch card was loaded but often out of viewport on cold start; now applies one-shot startup reveal strategy during startup window.
- **Refresh Toast Lifecycle Fix**: Fixed issue where â€œæ–°å¢ X æ¡å†…å®¹â€ hint could remain on screen and not auto-dismiss reliably.
- **Recommendation Signal Upgrade**:
  - fused history completion + recency + creator affinity
  - linked eye-care night signal (shorter, lower-stimulation preference at night)
  - integrated dislike penalties (video / creator / keyword)
  - diversified queue ordering to avoid consecutive same-creator streaks
- **Playback Quality Switching Reliability**:
  - quality options now prioritize actual DASH switchable tracks
  - cache switching now requires exact quality match; falls back to API fetch when missing
  - improved quality-switch toast wording for clearer fallback explanation
- **History Model Enrichment**: Added `author_mid` mapping in history response conversion so creator affinity can be computed accurately.
- **Plugin Registry Update**: Built-in plugin count updated from 4 to 5 by registering Today Watch plugin in app startup.
- **App Icon Switching Fix**: Resolved icon switching errors caused by mismatched Telegram activity-alias names during app startup icon-state sync (`icon_telegram_pink`, `icon_telegram_purple`, `icon_telegram_dark`).

### âœ… Tests (æµ‹è¯•)

- Added and verified unit tests:
  - `TodayWatchPolicyTest`
  - `TodayWatchMotionPolicyTest`
  - `TodayWatchStartupRevealPolicyTest`
  - `EyeProtectionPolicyTest`
  - `VideoPlaybackUseCaseQualitySwitchTest`

### ğŸ“¦ Release

- **Version Bump**: Updated app version to `5.3.0`.

## [5.2.2] - 2026-02-11

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Danmaku Interaction Callback**: Wired danmaku click callback end-to-end for context menu and interaction extension scenarios.

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Portrait Video Mode Upgrade**: Improved portrait-mode player flow, including playback continuity when swiping between videos, progress synchronization across portrait/landscape transitions, and overlay control consistency.
- **Dynamic Feed UX**: Added dynamic-tab bottom reselect double-tap to top behavior and improved smoothness of Home/Dynamic return-to-top animations.
- **Forwarded Dynamic Images**: Fixed an issue where images inside forwarded dynamics could not be opened for preview.
- **Image Preview Animation Polish**: Unified open/close motion for image preview dialog across entry points, with smoother rounded-corner transitions and spring-like close rebound.
- **Inbox User Info Stability**: Improved reliability of avatar/username resolution in private-message list after repeated entry.
- **Version Bump**: Updated app version to `5.2.2`.

## [5.2.1] - 2026-02-11

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Space Dynamic Navigation**: Fixed an issue where image/text dynamics in personal space could not be opened; now dynamic cards route correctly:
  - video dynamics -> native video detail
  - non-video dynamics -> dynamic detail page (`t.bilibili.com/{id_str}`)
- **Home Double-Tap Stability**: Fixed blank area appearing when double-tapping Home from non-top position with "header auto-collapse" enabled; Home double-tap now restores top header/tabs before scroll/refresh.
- **Liquid Glass Indicator Tuning**: Improved bottom bar indicator geometry in icon+text mode so labels participate in refraction more reliably.
- **Version Bump**: Updated app version to `5.2.1`.

## [5.2.0] - 2026-02-10

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Top Tabs Style Sync**: Top category tab bar now follows bottom bar style linkage, supporting floating/non-floating, blur, and liquid glass modes with unified visual language.
- **Refraction Upgrade**: Added stronger liquid lens profile for tab/bottom indicators during horizontal slide, with a clearer spherical feel and edge-space warp.
- **Incremental Timeline Refresh**: Added optional incremental refresh for Recommend/Following/Dynamic feeds, preserving old content and prepending only new items.
- **Refresh Delta Feedback**: Added "new items count" prompt after manual refresh and an old-content divider cue in Recommend.

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Top Indicator Geometry**: Refined top indicator size/shape/centering and boundary clamping to prevent clipping and offset drift when sliding.
- **Bottom Indicator Refraction Source**: Fixed cases where icon/text were not clearly refracted by switching to icon-layer backdrop capture.
- **Default Visual Bootstrapping**: Added one-time startup migration to ensure default Home visual settings are enabled on first launch after update:
  - floating bottom bar
  - liquid glass enabled
  - top blur enabled
- **Version Bump**: Updated app version to `5.2.0`.

## [5.1.4] - 2026-02-08

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Playback Fix**: Resolved playback issues in certain scenarios.

## [5.1.3] - 2026-02-08

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Search Upgrade**: Extended search types and interaction flow (è§†é¢‘/UP/ç•ªå‰§/ç›´æ’­), improved suggestion/discover results, and optimized pagination/loading behavior.
- **Comment Preference**: Added configurable default comment sort preference and synchronized it across comment entry points.
- **Danmaku Plugin 2.0**: Added user ID/hash blocking for danmaku plugins, plus in-play hot refresh when danmaku plugin configs/rules change.
- **Fullscreen Clock**: Added a top time display in landscape/fullscreen overlays.
- **Settings Tips Expansion**: Added more hidden usage tips in the tips page.
- **Version Easter Egg**: Enhanced version-click visual/easter-egg effects and toggles.

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **Bottom Bar UX**: Reworked bottom bar visibility rules for top-level destinations and fixed alignment/position issues when tab count changes.
- **Playback Completion UX**: When "Auto-play next" is disabled, playback completion no longer forces intrusive action popups.
- **Background Playback Fix**: Fixed an issue where switching recommended videos inside detail page could dirty lifecycle flags and cause unexpected pause on Home/background.
- **Gesture Anti-MisTouch**: Brightness/volume vertical gestures are now limited to left/right one-third zones; center zone no longer triggers accidental adjustments.
- **Like Icon Unification**: Replaced heart-like visuals with thumb-up style across key interaction surfaces.
- **Comment Logic Reliability**: Fixed missing UP/ç½®é¡¶ comments under some sort modes and improved mixed-source comment loading behavior.
- **Firebase Telemetry Hardening**: Strengthened Firebase Analytics + Crashlytics integration (user/session context, custom keys, screen/event tracing, and error domain reporting).
- **General Stability**: Multiple UI/state synchronization fixes across home, video detail, plugin center, and settings.

## [5.1.1] - 2026-02-07

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Experimental Features**: Added some experimental features for better user experience.

### ğŸ›  Improvements & Fixes (ä¼˜åŒ–ä¸ä¿®å¤)

- **System Stability**: Fixed some known issues and optimized layout performance.

## [5.1.0] - 2026-02-06

### ğŸ›  Improvements (ä¼˜åŒ–)

- **Scrolling Performance**: Optimized list scrolling performance and reduced recomposition overhead.
- **UI Interaction**: Enhanced card press feedback and physics.

## [5.0.5] - 2026-02-05

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Video Player Optimization**: Narrowed brightness/volume trigger zones in portrait mode to prevent accidental triggers when swiping for fullscreen.
- **AI Summary**: Added support for AI-generated video summaries.
- **Music Identification**: Added support for identifying and searching for BGM in videos.
- **Version Bump**: Updated app version to 5.0.5.

### ğŸ›  Improvements (ä¼˜åŒ–)

- **Engineering**: Removed mandatory dependency on `google-services.json` for cleaner builds.
- **Tablet Support**: Improved drawer and bottom bar interaction on tablets.
- **Messaging**: Enhanced private message loading and added video link previews.

## [5.0.1] - 2026-02-01

### âœ¨ New Features (æ–°å¢åŠŸèƒ½)

- **Deep Link Support**: Added comprehensive support for Bilibili links (Video, Live, Space, Dynamic). Supports `bilibili.com`, `m.bilibili.com`, `live.bilibili.com`, `space.bilibili.com`, `t.bilibili.com`.
- **Playback Controls**:
  - Added "Loop Single" (å•æ›²å¾ªç¯) mode.
  - Added "Shuffle" (éšæœºæ’­æ”¾) mode.
  - Added "Sequential" (é¡ºåºæ’­æ”¾) mode.
  - Added "Pause on Completion" (æ’­å®Œæš‚åœ) logic when auto-play is disabled.
- **Settings**:
  - Fixed "Auto-Play Next" setting synchronization.

### ğŸ› Bug Fixes (ä¿®å¤)

- **UI**: Fixed "Share" button in video detail screen not responding.
- **UI**: Renamed "IPå±åœ°" to "IPå½’å±åœ°" for consistency.
- **Compilation**: Resolved build errors related to `PlaylistManager` and `PlayMode`.
